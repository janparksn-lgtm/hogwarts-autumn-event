<!-- beer.html -->
<div id="evBeer-root" class="ev-beer">
  <style>
    .ev-beer{--bg:#1a1625; --card:#261e36; --ink:#f7f2e8; --ink-dim:#cfc6b4; --grid:#3a2f4d; --accent:#f0a202}
    .ev-beer *{box-sizing:border-box}
    .ev-beer .wrap{max-width:820px; margin:28px auto; padding:16px; color:var(--ink);
      font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Inter,Arial,sans-serif}
    .ev-beer .head{background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,0)),
                   radial-gradient(600px 200px at 50% -50px, rgba(240,162,2,.25), transparent 70%);
      border:1px solid var(--grid); border-radius:18px; padding:12px 14px; margin-bottom:14px;
      display:flex; align-items:center; justify-content:space-between; gap:12px; flex-wrap:wrap}
    .ev-beer .title{display:flex; align-items:center; gap:12px}
    .ev-beer .mug{width:42px; height:42px; border-radius:10px; display:grid; place-items:center; background:
      linear-gradient(180deg,#f9f3d1,#f1d58a 60%, #e3b04a),
      radial-gradient(circle at 50% 0%, #fff 0 40%, transparent 41%);
      box-shadow: inset 0 -10px 18px rgba(0,0,0,.2), 0 6px 20px rgba(0,0,0,.3); color:#5a3b00; font-size:22px}
    .ev-beer h1{font-size:18px; margin:0}
    .ev-beer .sub{font-size:12px; color:var(--ink-dim)}
    .ev-beer .controls{display:flex; gap:8px; align-items:center; flex-wrap:wrap}
    .ev-beer button{appearance:none; border:1px solid #4a3a63; background:#33294a; color:var(--ink);
      padding:8px 12px; border-radius:10px; font:600 12px/1 ui-sans-serif,system-ui; cursor:pointer; transition:.2s; box-shadow:0 2px 0 rgba(0,0,0,.25)}
    .ev-beer button:hover{transform:translateY(-1px)}
    .ev-beer .hud{display:flex; gap:12px; align-items:center; flex-wrap:wrap}
    .ev-beer .pill{padding:6px 10px; border-radius:999px; background:#2a203b; border:1px solid var(--grid); font-size:12px}
    .ev-beer .board{--cols:5; display:grid; grid-template-columns:repeat(var(--cols), minmax(80px,1fr)); gap:10px;
      background:var(--card); border:1px solid var(--grid); border-radius:16px; padding:14px}
    .ev-beer .card{position:relative; aspect-ratio:3/4; border:1px solid var(--grid); border-radius:12px; background:#251d39; cursor:pointer; perspective:900px}
    .ev-beer .card.disabled{pointer-events:none; opacity:.9}
    .ev-beer .inner{position:absolute; inset:0; transform-style:preserve-3d; transition:transform .35s cubic-bezier(.2,.6,.2,1)}
    .ev-beer .flipped .inner{transform:rotateY(180deg)}
    .ev-beer .face{position:absolute; inset:0; display:grid; place-items:center; backface-visibility:hidden; border-radius:12px}
    .ev-beer .front{background:
      radial-gradient(200px 120px at 50% -30px, rgba(255,255,255,.08), transparent 60%),
      repeating-linear-gradient(135deg, #2e2740 0 12px, #2a213b 12px 24px); border:1px solid #4a3a63}
    .ev-beer .front::after{content:''; position:absolute; inset:10px; border-radius:10px; border:1px dashed #614f7f}
    .ev-beer .back{transform:rotateY(180deg); background:#1e162c; border:1px solid #4a3a63}
    .ev-beer .emoji{font-size:34px; filter:drop-shadow(0 6px 10px rgba(0,0,0,.4))}
    .ev-beer .matched .back{box-shadow:inset 0 0 0 999px rgba(80,200,120,.08)}
    .ev-beer .matched .inner{animation:evb-pop .35s ease}
    @keyframes evb-pop{from{transform:rotateY(180deg) scale(.9)} to{transform:rotateY(180deg) scale(1)}}
    .ev-beer .footer{display:flex; align-items:center; justify-content:space-between; gap:10px; margin-top:12px; flex-wrap:wrap}
    .ev-beer .note{font-size:12px; color:var(--ink-dim)}
  </style>

  <div class="wrap">
    <div class="head">
      <div class="title">
        <div class="mug">üç∫</div>
        <div>
          <h1>–ù–∞–π–¥–∏ –ø–∞—Ä—É ‚Äî ¬´–°–ª–∏–≤–æ—á–Ω–æ–µ –ø–∏–≤–æ¬ª</h1>
          <div class="sub">–°—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å 5√ó4. –ù–∞–π–¥–∏ –≤—Å–µ –ø–∞—Ä—ã –¥–æ –∏—Å—á–µ—Ä–ø–∞–Ω–∏—è –ª–∏–º–∏—Ç–∞ —Ö–æ–¥–æ–≤.</div>
        </div>
      </div>
      <div class="controls">
        <button id="evBeer-restart">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
      </div>
      <div class="hud">
        <span class="pill" id="evBeer-moves">–•–æ–¥—ã: 0/30</span>
        <span class="pill" id="evBeer-time">–í—Ä–µ–º—è: 00:00</span>
        <span class="pill" id="evBeer-pairs">–ü–∞—Ä—ã: 0/10</span>
      </div>
    </div>

    <main class="board" id="evBeer-board" aria-label="–ò–≥—Ä–æ–≤–æ–µ –ø–æ–ª–µ"></main>

    <div class="footer">
      <div class="note">–ü–æ–¥—Å–∫–∞–∑–∫–∞: <b>Enter</b> ‚Äî –æ—Ç–∫—Ä—ã—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É (—Ñ–æ–∫—É—Å Tab).</div>
      <div class="note">–°—á—ë—Ç –¥–µ—Ä–∂–∏—Ç—Å—è –¥–æ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.</div>
    </div>
  </div>

  <script>
  (function(){
    const root = document.getElementById('evBeer-root');
    if(!root) return;

    const ICONS = ['üç∫','üçª','üéÉ','üïØÔ∏è','ü¶â','üìö','üßπ','‚öóÔ∏è','üç´','üçé','ü™Ñ','üßô‚Äç‚ôÄÔ∏è','üï∑Ô∏è','ü™∂','üåï','ü¶á','üîÆ','üß§','ü´ô','üç™','üó∫Ô∏è','üß≠','üè∞','üß™','üìú'];
    const CFG = { cols:5, rows:4, pairs:10 };
    const MOVES_LIMIT = 30;

    const board = root.querySelector('#evBeer-board');
    const restartBtn = root.querySelector('#evBeer-restart');
    const movesEl = root.querySelector('#evBeer-moves');
    const timeEl  = root.querySelector('#evBeer-time');
    const pairsEl = root.querySelector('#evBeer-pairs');

    let state = { deck:[], matched:0, moves:0, started:false, secs:0, over:false };
    let timer = null;

    function shuffle(a){ for(let i=a.length-1;i>0;i--){ const j=Math.floor(Math.random()*(i+1)); [a[i],a[j]]=[a[j],a[i]] } return a }
    function fmt(n){ return n<10? '0'+n : ''+n }
    function tick(){ state.secs++; timeEl.textContent = `–í—Ä–µ–º—è: ${fmt(Math.floor(state.secs/60))}:${fmt(state.secs%60)}` }
    function startTimer(){ if(timer) return; timer=setInterval(tick,1000) }
    function stopTimer(){ if(timer){ clearInterval(timer); timer=null } }

    function buildDeck(){
      const base = ['üç∫','üçª'];
      const rest = shuffle(ICONS.filter(x=>!base.includes(x))).slice(0, CFG.pairs - base.length);
      return shuffle([...base, ...rest].flatMap(x=>[x,x]));
    }

    function updateHUD(){
      movesEl.textContent = `–•–æ–¥—ã: ${state.moves}/${MOVES_LIMIT}`;
      timeEl.textContent  = `–í—Ä–µ–º—è: ${fmt(Math.floor(state.secs/60))}:${fmt(state.secs%60)}`;
      pairsEl.textContent = `–ü–∞—Ä—ã: ${state.matched}/${CFG.pairs}`;
    }

    function render(){
      board.style.setProperty('--cols', CFG.cols);
      board.innerHTML='';
      state.deck.forEach((icon)=>{
        const card = document.createElement('button');
        card.className='card'; card.type='button'; card.setAttribute('data-icon', icon); card.setAttribute('aria-label','–∫–∞—Ä—Ç–æ—á–∫–∞');
        card.innerHTML = `<div class="inner"><div class="face front"></div><div class="face back"><div class="emoji">${icon}</div></div></div>`;
        card.addEventListener('click', ()=>flip(card));
        card.addEventListener('keyup', (e)=>{ if(e.key==='Enter' || e.key===' '){ flip(card) } });
        board.appendChild(card);
      });
      updateHUD();
    }

    let lock=false, first=null;
    function flip(card){
      if(state.over || lock || card.classList.contains('flipped') || card.classList.contains('matched')) return;
      if(!state.started){ state.started=true; startTimer(); }

      card.classList.add('flipped');
      if(!first){ first=card; return }

      const second = card; state.moves++;
      const a = first.getAttribute('data-icon'), b = second.getAttribute('data-icon');

      if(a===b){
        [first,second].forEach(c=>{ c.classList.add('matched'); c.classList.add('disabled'); });
        state.matched++; first=null; updateHUD(); checkEnd();
      } else {
        lock=true;
        setTimeout(()=>{ [first,second].forEach(c=> c.classList.remove('flipped')); first=null; lock=false; updateHUD(); checkEnd(); }, 650);
      }
      updateHUD();
    }

    function disableAll(){ board.querySelectorAll('.card').forEach(c=> c.classList.add('disabled')) }
    function checkEnd(){
      if(state.matched>=CFG.pairs){ stopTimer(); state.over=true; disableAll();
        setTimeout(()=> alert(`–ü–æ–±–µ–¥–∞!\n–•–æ–¥—ã: ${state.moves}/${MOVES_LIMIT}\n–í—Ä–µ–º—è: ${fmt(Math.floor(state.secs/60))}:${fmt(state.secs%60)}`), 50); return; }
      if(state.moves>=MOVES_LIMIT){ stopTimer(); state.over=true; disableAll(); setTimeout(()=> alert('–•–æ–¥—ã –∑–∞–∫–æ–Ω—á–∏–ª–∏—Å—å!'), 50); }
    }
    function reset(){ stopTimer(); state={ deck:buildDeck(), matched:0, moves:0, started:false, secs:0, over:false }; render(); }

    restartBtn.addEventListener('click', reset);
    reset();
  })();
  </script>
</div>
